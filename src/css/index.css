@import "swiper/swiper.min.css";
@import "swiper/components/pagination/pagination.min.css";
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --swiper-theme-color: #1c5275;
  }

  @font-face {
    font-family: Circular;
    src: url(../../public/fonts/CircularStd-Black.otf);
    src: url(../../public/fonts/CircularStd-Black.eot) format("embedded-opentype"),
      url(../../public/fonts/CircularStd-Black.woff2) format("woff2"),
      url(../../public/fonts/CircularStd-Black.woff) format("woff");
    font-weight: 700;
    font-style: normal;
  }

  @font-face {
    font-family: Circular;
    src: url(../../public/fonts/CircularStd-Book.ttf);
    src: url(../../public/fonts/CircularStd-Book.eot) format("embedded-opentype"),
      url(../../public/fonts/CircularStd-Book.woff2) format("woff2"),
      url(../../public/fonts/CircularStd-Book.woff) format("woff");
    font-weight: 400;
    font-style: normal;
  }

  @font-face {
    font-family: Platform;
    src: url(../../public/fonts/Platform-Medium.otf);
    src: url(../../public/fonts/Platform-Medium.eot) format("embedded-opentype"),
      url(../../public/fonts/Platform-Medium.woff2) format("woff2"),
      url(../../public/fonts/Platform-Medium.woff) format("woff");
    font-weight: 700;
  }

  @font-face {
    font-family: Lyon;
    src: url(../../public/fonts/LyonText-Regular.otf);
    src: url(../../public/fonts/LyonText-Regular.eot) format("embedded-opentype"),
      url(../../public/fonts/LyonText-Regular.woff2) format("woff2"),
      url(../../public/fonts/LyonText-Regular.woff) format("woff");
    font-weight: 400;
    font-style: none;
  }

  @font-face {
    font-family: Lyon;
    src: url(../../public/fonts/LyonText-Bold.otf);
    src: url(../../public/fonts/LyonText-Bold.eot) format("embedded-opentype"),
      url(../../public/fonts/LyonText-Bold.woff2) format("woff2"),
      url(../../public/fonts/LyonText-Bold.woff) format("woff");
    font-weight: 700;
    font-style: none;
  }

  @font-face {
    font-family: Lyon;
    src: url(../../public/fonts/LyonText-RegularItalic.otf);
    src: url(../../public/fonts/LyonText-RegularItalic.eot) format("embedded-opentype"),
      url(../../public/fonts/LyonText-RegularItalic.woff2) format("woff2"),
      url(../../public/fonts/LyonText-RegularItalic.woff) format("woff");
    font-weight: 400;
    font-style: italic;
  }

  @font-face {
    font-family: Lyon;
    src: url(../../public/fonts/LyonText-BoldItalic.otf);
    src: url(../../public/fonts/LyonText-BoldItalic.eot) format("embedded-opentype"),
      url(../../public/fonts/LyonText-BoldItalic.woff) format("woff");
    font-weight: 700;
    font-style: italic;
  }

  .hero-tech-giants {
    @apply bg-cover bg-center;
    background-image: url("../images/hero-tech-giants.jpg?size=1024");
  }

  .hero-state-of-emergency {
    @apply bg-contain bg-no-repeat bg-center;
    background-image: url("../images/bg-kashmir.jpg?size=1024");
  }

  .hero-algorithms {
    @apply bg-cover bg-center;
    background-image: url("../images/hero-robots-by-pawel-kuczynski.jpg?size=1024");
  }

  .hero-key-findings {
    @apply bg-cover bg-center;
    background-image: url("../images/bg-key-findings.jpg?size=1024");
  }

  .bg-key-findings {
    @apply bg-cover;
    background-image: url("../images/bg-key-findings.jpg?size=600");
  }

  .bg-context-over-code {
    position: relative;
    height: 100vh;
    width: 100%;
  }

  .bg-context-over-code::before {
    /* @apply bg-cover absolute; */
    content: "";
    background-image: url("../images/bg-kashmir.jpg?size=600");
    background-size: cover;
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    opacity: 0.5;
  }

  .bg-unaccountable-algorithms {
    position: relative;
    height: 100vh;
    width: 100%;
  }

  .bg-unaccountable-algorithms:before {
    content: "";
    background-image: url("../images/bg-unaccountable-algorithms.jpg?size=600");
    background-size: cover;
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    opacity: 0.5;
  }

  .bg-tech-giants {
    /* @apply relative w-full h-full inset-0 relative; */
    position: relative;
    height: 100vh;
    width: 100%;
  }

  .bg-tech-giants::before {
    /* @apply bg-cover absolute; */
    content: "";
    background-image: url("../images/bg-tech-giants.jpg?size=1024");
    background-size: cover;
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    left: 0px;
    opacity: 0.5;
  }

  /* Get rid of the border outlines on button unless user is actually tabbing. */
  body:not(.user-is-tabbing) button:focus,
  body:not(.user-is-tabbing) input:focus,
  body:not(.user-is-tabbing) select:focus,
  body:not(.user-is-tabbing) textarea:focus {
    outline: none;
  }

  html {
    @apply font-lyon text-base;
    font-size: 18px;
    /* FIXME: Smooth scrolling clashes with lazy loaded images. I disabled lazy
     * loaded images for now but would love to find a solution that works with both.
     */
    scroll-behavior: smooth;
  }

  @media screen and (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }

  h1 {
    @apply text-xl font-platform leading-none break-words;
  }

  h2 {
    @apply font-platform leading-none break-words;
    font-size: 1.6rem;
  }

  h3 {
    @apply font-platform leading-none mb-3 break-words;
    font-size: 1.2rem;
  }

  h4 {
    @apply text-xs font-circular;
  }

  h5 {
    @apply text-xxs font-circular;
  }

  button {
    @apply font-lyon;
  }

  ul {
    @apply list-disc list-outside ml-6;
  }

  li {
    @apply mb-3;
  }

  ul.menubar>li,
  ul.footer>li {
    @apply mb-0;
  }

  p {
    @apply mb-3;
  }

  .narrative-container {
    max-width: 900px;
    scroll-behavior: smooth;
  }

  a {
    @apply text-prissian font-bold;
  }

  div.rank-card a {
    @apply text-white;
  }

  a:hover {
    @apply underline;
  }

  .toggle-checkbox:not(:checked) {
    left: 0.2rem;
  }

  .toggle-checkbox:checked {
    right: 0.2rem;
  }

  .score-label:before {
    @apply absolute transform -rotate-90;

    content: "";
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid #1c5275;
    left: -6px;
    top: 9px;
  }

  .svg-shadow {
    -webkit-filter: drop-shadow(-3px 3px 2px rgba(0, 0, 0, 0.2));
    filter: drop-shadow(-3px 3px 2px rgba(0, 0, 0, 0.2));
  }

  .narrative h2 {
    @apply my-6;
  }

  .pullquote {
    @apply flex font-platform text-lg text-prissian my-6;
  }

  @screen md {
    .pullquote:before {
      @apply relative -left-5 border-prissian;

      content: " ";
      border-right-width: 7px;
    }
  }

  .pullquote>p {
    @apply p-0 m-0 leading-tight;
  }

  .footnotes a {
    @apply break-words;
  }

  .footnotes p {
    @apply mb-2;
  }

  .company-table::-webkit-scrollbar {
    height: 9px;
  }

  .company-table::-webkit-scrollbar-track {
    @apply bg-beige;
  }

  .company-table::-webkit-scrollbar-thumb {
    @apply bg-prissian rounded-md;
  }

  /* Spotlights Start */

  .bg-mint-green {
    background-color: #ABD9D7;
  }

  .bg-light-grey {
    background-color: #F7F4F2;
  }

  .btn-info {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    cursor: crosshair;
    position: absolute;
    top: 1rem;
    right: 1rem;
  }

  main.spotlight h1 {
    max-width: 900px;
    margin: 2rem auto;
  }

  main.spotlight {
    max-width: 100%;
  }

  main.spotlight .hidden {
    display: none;
    opacity: 0;
    transition: opacity 0.6s ease-in-out;
  }

  /* main.spotlight .hero {
    height: 100vh;
    width: 100%;
    margin-top: -60px;
  } */

  main.spotlight .fade-in {
    opacity: 1;
    transition: opacity 0.6s ease-in-out;
  }

  main.spotlight .fade-out {
    opacity: 0;
    transition: opacity 0.6s ease-in-out;
  }

  main.spotlight section p,
  main.spotlight section ol,
  main.spotlight section ul,
  main.spotlight blockquote {
    max-width: 900px;
    margin: 1rem auto;
  }

  .hero-full {
    /* height: calc(100vh - 72px); */
    height: 66vh;
    background-size: cover;
  }

  .author-byline {
    @apply text-lg font-platform;
  }

  main.spotlight blockquote {
    @apply font-platform text-rdr text-lg;
    margin-bottom: 2rem;
    display: flex;
    flex-direction: row;
    border-left: 6px solid;
    padding-left: 1rem;
    margin-top: 1.5rem;
    margin-bottom: 2rem;
  }

  /* main.spotlight blockquote:before {
    content: "‚Äù";
    padding-right: 1rem;
    margin-right: 1rem;
    font-size: 3rem;
    border-right: 4px solid orange;
  } */

  /* 
  main.spotlight section h2 {
    text-transform: uppercase;
  }

  main.spotlight section {
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  main.spotlight section:first-of-type {
    padding-top: 30px;
  } */

  main.spotlight section.scrolly {
    /* @apply relative; */
    padding: 0;
    margin: 0;
  }

  main.spotlight h2.sticky-h {
    @apply sticky;
    top: 30px;
    display: inline;
  }

  main.spotlight h2.scrolly-title {
    /* @apply max-w-6xl; */
    position: absolute;
    top: 30px;
    left: 1rem;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 1rem;
    z-index: 10;
  }

  main.spotlight h3 {
    @apply text-lg;
  }

  main.spotlight a {
    font-weight: 700;
  }

  main.spotlight ol {
    list-style-type: decimal;
  }

  main.spotlight ol li {
    font-family: Circular, sans-serif;
    font-size: 1rem;
  }

  main.spotlight iframe {
    margin: 3rem auto;
    padding: 1rem;
    border-radius: 5px;
  }

  main.spotlight figure:not(.hero-figure) {
    width: 100%;
    max-width: 900px;
    margin: 1.5rem auto 2rem auto;
  }

  main.spotlight figure.contained {
    max-width: 900px;
  }

  /* main.spotlight figure:not(.hero-figure) figcaption {
    @apply font-platform;
    text-align: right;
    margin: 1rem auto;
  } */

  main.spotlight figcaption {
    @apply font-circular text-xxs py-1;
  }

  main.spotlight figure:not(.hero-figure) img {
    margin: 0 auto;
    width: 100%;
  }

  figure svg {
    margin: 0 auto;
  }

  main.spotlight figure.spot-figure,
  main.spotlight figure.scrolly-figure {
    margin: 0;
  }

  .scrolly-canvas figure.figure-svg {
    margin: 0 auto;
    overflow: clip;
  }

  .scrolly-canvas figure.figure-svg svg {
    transform: translate(-50%, -50%);
    top: 50%;
    position: absolute;
    min-width: 100%;
    left: 50%;
    max-height: 100%;
  }

  .scrolly-canvas figure#chart-q1 svg {
    padding: 1rem;
  }

  .scrolly-canvas figure figcaption {
    position: absolute;
    bottom: 0;
    padding-left: 1rem;
    right: 1rem;
  }

  div.scrolly-canvas {
    @apply sticky w-full m-0 left-0;
    left: 0;
    top: 0;
    /* top: 60px; */
    width: 100%;
    /* height: calc(100vh - 60px); */
    height: 100vh;
    margin: 0;
    z-index: 0;
  }

  div.scrolly-canvas figure.scrolly-figure {
    overflow: clip;
    width: 100%;
    height: 100%;
    max-width: unset;
    margin: 0;
    /* margin-bottom: 3rem; */
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    -webkit-transition: background-color 1.2s ease-out;
    -moz-transition: background-color 1.2s ease-out;
    -o-transition: background-color 1.2s ease-out;
    transition: background-color 1.2s ease-out;
  }

  div.scrolly-steps {
    @apply relative p-0 max-w-md mx-auto z-10;
    margin-top: 0;
    margin-bottom: 0;
    padding: 0 1rem;
    z-index: 3;
    overflow-y: hidden;
    width: 100%;
    /* unclear why, but solves white space problem for now */
  }

  .step.invisible {
    visibility: hidden;
    margin: 50vh auto 50vh auto;
    height: 1vh;
  }

  .step {
    padding-bottom: 133vh;
  }

  .step .step-content {
    @apply bg-white shadow;
    /* margin-top: 133vh;
    margin-bottom: 133vh; */
    padding: 1rem;
    border-radius: 10px;
  }

  main.spotlight section.scrolly .step h2 {
    padding-left: 0;
    display: block;
  }

  .step div {
    margin-top: 1rem;
    margin-bottom: 1rem;
  }

  .step p {
    padding-bottom: 0;
  }

  .step:first-child {
    margin-top: 0;
  }

  /* .step:last-child {
    margin-bottom: 133vh;
  } */

  .step.is-active h3 {
    @apply bg-yellow-500 text-gray-200;
  }

  .step h1,
  .step h2,
  .step h3 {
    @apply text-center;
  }

  .step h3 {
    @apply p-4 bg-gray-200;
  }

  div.scrolly-chart {
    max-width: 600px;
    position: relative;
    display: flex;
    justify-content: center;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  div.scrolly-chart .label {
    color: black;
    font-weight: 700;
  }

  main.spotlight .box-prompt {
    margin-bottom: 2rem;
    text-align: right;
    min-height: 65px;
  }

  main.spotlight .box-prompt .box-prompt-content {
    @apply bg-accent-gold text-base text-black font-bold font-circular;
    margin: 0 0 0 auto;
    border-radius: 24px;
    height: 100%;
    text-align: right;
    /* max-width: 360px; */
    width: 66%;
    padding: 1rem;
    line-height: 1.1rem;
  }

  main.spotlight .box-prompt .box-prompt-content a {
    @apply text-black;
  }

  main.spotlight .box-placeholder {
    border: 2px solid lightgrey;
    text-align: right;
    max-width: 900px;
    margin: 0 auto;
    padding: 0.3rem 0.6rem;
    min-height: 50vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  main.spotlight .box-placeholder:hover {
    background-color: lightgrey;
    transition: background-color 0.6s;
  }

  @media screen and (min-width: 900px) {
    div.scrolly-steps {
      width: 34%;
      margin-left: 0;
      max-width: unset;
      background-color: bg-light-grey;
      transition: background-color 1s ease-in;
    }

    div.scrolly-canvas {
      width: 66%;
      margin-right: 0;
      margin-left: auto;
    }

    div.scrolly-steps .step {
      margin-left: 1rem;
      margin-right: 1rem;
    }
  }

  /* Spotlights End */
}

@media print {
  @page :first {
    size: A4 portrait;
    margin: 0 0 10mm 0;
  }

  @page {
    size: A4 portrait;
    margin: 10mm 0 10mm 0;
  }

  html {
    @apply font-lyon text-base;
    font-size: 12px;
  }

  body {
    background-size: 21cm 29.7cm;
  }

  li {
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
    break-inside: avoid;
    break-inside: avoid-column;
  }

  p {
    padding: 0;
  }

  .printer {
    /* width: auto; */
    border: 0;
    margin: 5% 5%;
    padding: 0;
    float: none;
    position: static;
    overflow: visible;
  }

  .page-break {
    break-before: page;
  }

  .no-page-break {
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
    break-inside: avoid;
    break-inside: avoid-column;
  }

  .score-label:before {
    @apply absolute;

    content: "";
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid #1c5275;
    transform: rotate(-90deg);
    left: -6px;
    top: 5px;
  }
}

@layer utilities {
  .h-hero {
    height: 36rem;
  }
}

/* For some reason unknown to me those styles are being removed during build.
 * Placing them here prevents that.
 */
.feature-box-wrapper {
  @apply relative mb-3;
}

.feature-box-inner:before {
  @apply bg-disabled-light;
  content: "";
  position: absolute;
  width: 104%;
  height: 100%;
  left: -2%;
  z-index: -1;
}

@media (min-width: 768px) {
  .feature-box-inner:before {
    @apply bg-disabled-light;
    content: "";
    position: absolute;
    width: 116%;
    height: 100%;
    left: -8%;
    z-index: -1;
  }
}

.feature-box {
  @apply relative pt-6 pb-1;
}
